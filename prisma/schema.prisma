datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Payment {
  id            Int       @id @default(autoincrement())
  bookingId     Int       @unique
  paymentStatus Statuspay @default(Pending)
  paymentDate   DateTime?
  slip          String?

  @@map("payments")
}

model User {
  id               Int       @id @default(autoincrement())
  username         String    @unique @db.VarChar(30)
  password         String    @db.VarChar(72)
  resetToken       String?
  resetTokenExpiry DateTime?
  email            String    @unique
  lastLoginAt      DateTime?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt
  role             String    @default("user")

  @@map("users")
}

model Booking {
  id        Int      @id @default(autoincrement())
  startTime DateTime
  endTime   DateTime
  dueDate   DateTime
  totalCost Float
  status    Status   @default(Pending)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  userId    Int
  fieldId   Int

  @@index([fieldId], map: "bookings_fieldId_fkey")
  @@index([userId], map: "bookings_userId_fkey")
  @@map("bookings")
}

model Competition {
  id    String  @id @default(cuid())
  title String
  dec1  String
  dec2  String
  dec3  String
  dec4  String
  dec5  String
  dec6  String
  link  String
  image String?

  @@map("competitions")
}

model Carousel {
  id        String   @id @default(cuid())
  image     String
  createdAt DateTime @default(now())

  @@map("carousels")
}

model field {
  id           Int    @id @default(autoincrement())
  name         String
  location     String
  pricePerHour Float
}

enum Status {
  Pending
  Confirm
  Cancel
  Completed
}

enum Statuspay {
  Pending
  Confirm
  Cancel
}
